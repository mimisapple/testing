class Wallet {
    constructor() {
        this.generateKeys();
    }

    generateKeys() {
        this.privateKey = this.generateHexKey(64); // 64 characters for a 256-bit key
        this.publicKey = this.generateHexKey(64); // 64 characters for a 256-bit key

        document.getElementById('public-key').textContent = this.publicKey;
        document.getElementById('private-key').textContent = this.privateKey;
        document.getElementById('wallet-keys').style.display = 'block';
    }

    generateHexKey(length) {
        let key = '';
        const characters = '0123456789abcdef';

        for (let i = 0; i < length; i++) {
            key += characters.charAt(Math.floor(Math.random() * characters.length));
        }

        return key;
    }

    async sendMoney(amount, payeePublicKey) {
        const transaction = new Transaction(amount, this.publicKey, payeePublicKey);
        const signature = this.signTransaction(transaction);

        Chain.instance.addBlock(transaction, this.publicKey, signature);
    }

    signTransaction(transaction) {
        // Simplified signing using HMAC for mnemonic keys
        const key = CryptoJS.enc.Hex.parse(this.privateKey);
        const data = CryptoJS.enc.Utf8.parse(transaction.toString());
        return CryptoJS.HmacSHA256(data, key).toString();
    }
}
